import{a as I,b as k,c as d,d as N,e as R,f as D,h as A,i as T,j,k as z,l as G}from"./chunk-7IDCIICY.js";import{C as p,E as s,F as t,G as n,H as b,J as y,K as P,M as o,O as S,X as w,Z as O,ea as F,fa as E,ha as M,ia as L,j as g,u as l,x as u,y as f,z as x}from"./chunk-MSHT3M2W.js";function Y(e,r){e&1&&(t(0,"small",17),o(1," Please enter a valid email "),n())}function q(e,r){e&1&&(t(0,"small",17),o(1," Password must be at least 6 characters "),n())}function K(e,r){if(e&1&&(t(0,"div",18),o(1),n()),e&2){let i=P();l(),S(" ",i.errorMessage," ")}}function W(e,r){e&1&&(t(0,"span"),o(1,"Sign In"),n())}function H(e,r){e&1&&(t(0,"span"),o(1,"Signing in..."),n())}var h=class e{constructor(r,i,a){this.fb=r;this.authService=i;this.router=a;this.loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],rememberMe:[!1]})}loginForm;isLoading=!1;errorMessage="";onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.isLoading=!0,this.errorMessage="",this.authService.login({email:this.loginForm.value.email,password:this.loginForm.value.password}).subscribe({next:r=>{this.authService.saveToken(r.token),this.router.navigate(["/admin/dashboard"])},error:r=>{this.errorMessage="Invalid email or password",this.isLoading=!1},complete:()=>{this.isLoading=!1}})}static \u0275fac=function(i){return new(i||e)(u(j),u(L),u(F))};static \u0275cmp=f({type:e,selectors:[["app-login"]],standalone:!1,decls:36,vars:7,consts:[[1,"login-wrapper"],[1,"login-card"],[1,"brand-section"],[3,"ngSubmit","formGroup"],[1,"subtitle"],[1,"form-group"],["type","email","formControlName","email","placeholder","Enter your email"],["class","error",4,"ngIf"],["type","password","formControlName","password","placeholder","Enter your password"],[1,"form-options"],["type","checkbox","formControlName","rememberMe"],["href","#"],["class","server-error",4,"ngIf"],["type","submit",1,"login-btn",3,"disabled"],[4,"ngIf"],[1,"register-link"],["routerLink","/register"],[1,"error"],[1,"server-error"]],template:function(i,a){if(i&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),o(4,"\u{1F33E} LocalKissan"),n(),t(5,"p"),o(6,"Smart Agriculture Management System"),n()(),t(7,"form",3),y("ngSubmit",function(){return a.onSubmit()}),t(8,"h2"),o(9,"Welcome Back"),n(),t(10,"p",4),o(11,"Sign in to continue"),n(),t(12,"div",5)(13,"label"),o(14,"Email"),n(),b(15,"input",6),p(16,Y,2,0,"small",7),n(),t(17,"div",5)(18,"label"),o(19,"Password"),n(),b(20,"input",8),p(21,q,2,0,"small",7),n(),t(22,"div",9)(23,"label"),b(24,"input",10),o(25," Remember me "),n(),t(26,"a",11),o(27,"Forgot password?"),n()(),p(28,K,2,1,"div",12),t(29,"button",13),p(30,W,2,0,"span",14)(31,H,2,0,"span",14),n(),t(32,"div",15),o(33," Don't have an account? "),t(34,"a",16),o(35,"Create Account"),n()()()()()),i&2){let m,c;l(7),s("formGroup",a.loginForm),l(9),s("ngIf",((m=a.loginForm.get("email"))==null?null:m.touched)&&((m=a.loginForm.get("email"))==null?null:m.invalid)),l(5),s("ngIf",((c=a.loginForm.get("password"))==null?null:c.touched)&&((c=a.loginForm.get("password"))==null?null:c.invalid)),l(7),s("ngIf",a.errorMessage),l(),s("disabled",a.isLoading),l(),s("ngIf",!a.isLoading),l(),s("ngIf",a.isLoading)}},dependencies:[w,E,D,k,I,N,R,A,T],styles:[".login-wrapper[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#0f5132,#198754);display:flex;justify-content:center;align-items:center;padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;width:100%;max-width:420px;padding:35px;border-radius:16px;box-shadow:0 15px 40px #00000026;animation:_ngcontent-%COMP%_fadeIn .4s ease-in-out}.brand-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:25px}.brand-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#198754;margin-bottom:5px}.brand-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#6c757d}h2[_ngcontent-%COMP%]{margin-bottom:5px}.subtitle[_ngcontent-%COMP%]{font-size:13px;color:#6c757d;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:18px;display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;margin-bottom:6px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 12px;border-radius:8px;border:1px solid #ced4da;transition:.3s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#198754;outline:none;box-shadow:0 0 0 3px #19875433}.error[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:4px}.server-error[_ngcontent-%COMP%]{background:#f8d7da;color:#842029;padding:10px;border-radius:6px;font-size:13px;margin-bottom:15px}.form-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:13px;margin-bottom:20px}.form-options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#198754}.login-btn[_ngcontent-%COMP%]{width:100%;padding:12px;border-radius:8px;border:none;background:linear-gradient(135deg,#0f5132,#198754);color:#fff;font-weight:600;cursor:pointer;transition:.3s}.login-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);opacity:.9}.login-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.register-link[_ngcontent-%COMP%]{margin-top:15px;font-size:13px;text-align:center}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#198754;text-decoration:none;font-weight:600}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})};var _=class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=f({type:e,selectors:[["app-register"]],standalone:!1,decls:2,vars:0,template:function(i,a){i&1&&(t(0,"p"),o(1,"register works!"),n())},encapsulation:2})};var J=[{path:"login",component:h},{path:"register",component:_}],v=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=x({type:e});static \u0275inj=g({imports:[M.forChild(J),M]})};var B=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=x({type:e});static \u0275inj=g({imports:[O,v,G,z]})};export{B as AuthModule};
