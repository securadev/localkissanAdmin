import{a as Y,b as J,c as M,d as Q,e as W,f as X,g as Z,h as tt,i as et,j as nt,k as it,l as rt}from"./chunk-7IDCIICY.js";import{C as A,E as m,F as e,G as t,H as a,I as C,J as l,K as p,M as i,N,O as b,Q as T,R as L,V,W as R,X as $,Y as j,Z as z,aa as U,da as G,ea as B,fa as H,ga as q,ha as h,i as F,ia as K,j as _,l as I,m as u,n as g,t as D,u as d,x as f,y as x,z as v}from"./chunk-MSHT3M2W.js";var O=class o{constructor(r,n){this.auth=r;this.router=n}logout(){this.auth.logout(),this.router.navigate(["/login"])}static \u0275fac=function(n){return new(n||o)(f(K),f(B))};static \u0275cmp=x({type:o,selectors:[["app-admin-layout"]],standalone:!1,decls:26,vars:0,consts:[[1,"admin-wrapper"],[1,"navbar"],[1,"logo"],[1,"nav-right"],[1,"user"],[1,"logout-btn",3,"click"],[1,"admin-body"],[1,"sidebar"],["routerLink","/admin/dashboard","routerLinkActive","active"],["routerLink","/admin/products","routerLinkActive","active"],[1,"content"],[1,"footer"]],template:function(n,c){n&1&&(e(0,"div",0)(1,"header",1)(2,"div",2),i(3," \u{1F33E} LocalKissan "),t(),e(4,"div",3)(5,"span",4),i(6,"Admin"),t(),e(7,"button",5),l("click",function(){return c.logout()}),i(8,"Logout"),t()()(),e(9,"div",6)(10,"aside",7)(11,"ul")(12,"li",8),i(13,"Dashboard"),t(),e(14,"li",9),i(15,"Products"),t(),e(16,"li"),i(17,"Farmers"),t(),e(18,"li"),i(19,"Orders"),t(),e(20,"li"),i(21,"Reports"),t()()(),e(22,"main",10),a(23,"router-outlet"),t()(),e(24,"footer",11),i(25," \xA9 2026 LocalKissan | Smart Agriculture Dashboard "),t()())},dependencies:[G,H,q],styles:[".admin-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;font-family:Segoe UI,sans-serif;background:#f4f6f9}.navbar[_ngcontent-%COMP%]{height:60px;background:linear-gradient(135deg,#0f5132,#198754);color:#fff;display:flex;justify-content:space-between;align-items:center;padding:0 25px;box-shadow:0 3px 10px #0000001a}.logo[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.nav-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.logout-btn[_ngcontent-%COMP%]{background:#fff;color:#198754;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-weight:600}.admin-body[_ngcontent-%COMP%]{display:flex;flex:1}.sidebar[_ngcontent-%COMP%]{width:230px;background:#1e293b;color:#fff;padding-top:20px}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:12px 20px;cursor:pointer;transition:.3s}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, .sidebar[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background:#198754}.content[_ngcontent-%COMP%]{flex:1;padding:25px;overflow-y:auto}.footer[_ngcontent-%COMP%]{height:40px;background:#0f5132;color:#fff;display:flex;align-items:center;justify-content:center;font-size:13px}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:180px}}"]})};var w=class o{static \u0275fac=function(n){return new(n||o)};static \u0275cmp=x({type:o,selectors:[["app-dashboard"]],standalone:!1,decls:28,vars:0,consts:[[1,"cards"],[1,"card"],[1,"charts"],[1,"chart-box"],["id","salesChart"],["id","productsChart"]],template:function(n,c){n&1&&(e(0,"h2"),i(1,"Dashboard Overview"),t(),e(2,"div",0)(3,"div",1)(4,"h3"),i(5,"Total Farmers"),t(),e(6,"p"),i(7,"1,240"),t()(),e(8,"div",1)(9,"h3"),i(10,"Total Products"),t(),e(11,"p"),i(12,"320"),t()(),e(13,"div",1)(14,"h3"),i(15,"Total Orders"),t(),e(16,"p"),i(17,"580"),t()(),e(18,"div",1)(19,"h3"),i(20,"Revenue"),t(),e(21,"p"),i(22,"$24,500"),t()()(),e(23,"div",2)(24,"div",3),a(25,"canvas",4),t(),e(26,"div",3),a(27,"canvas",5),t()())},styles:[".cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}.card[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:12px;box-shadow:0 5px 20px #00000014;transition:.3s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px;color:#6c757d}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;font-weight:600;color:#198754;margin-top:5px}.charts[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.chart-box[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:12px;box-shadow:0 5px 20px #00000014}@media (max-width: 900px){.charts[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var S=class o{constructor(r){this.http=r}baseUrl="https://localkissan-api.securadev.com/farm";getProducts(){return this.http.get(`${this.baseUrl}/products`)}getProductById(r){return this.http.get(`${this.baseUrl}/product/${r}`)}createProduct(r){return this.http.post(`${this.baseUrl}/product`,r)}updateProduct(r,n){return this.http.put(`${this.baseUrl}/product/${r}`,n)}deleteProduct(r){return this.http.delete(`${this.baseUrl}/product/${r}`)}static \u0275fac=function(n){return new(n||o)(I(U))};static \u0275prov=F({token:o,factory:o.\u0275fac,providedIn:"root"})};function ct(o,r){if(o&1){let n=C();e(0,"div",2)(1,"h2",3),i(2,"\u{1F33E} Add Product"),t(),e(3,"div",4)(4,"form",5),l("ngSubmit",function(){u(n);let s=p();return g(s.onSubmit())}),e(5,"div",6)(6,"div",7)(7,"label"),i(8,"Product Name"),t(),a(9,"input",8),t(),e(10,"div",7)(11,"label"),i(12,"Price ($)"),t(),a(13,"input",9),t(),e(14,"div",10)(15,"label"),i(16,"Image URL"),t(),a(17,"input",11),t(),e(18,"div",10)(19,"label"),i(20,"Description"),t(),a(21,"textarea",12),t(),e(22,"div",13)(23,"label"),i(24,"Status"),t(),e(25,"label",14),a(26,"input",15)(27,"span",16),t()()(),e(28,"button",17),i(29," Save Product "),t(),e(30,"button",18),l("click",function(){u(n);let s=p();return g(s.toggleTable(!0))}),i(31," Cancel "),t()()()()}if(o&2){let n=p();d(4),m("formGroup",n.productForm)}}function st(o,r){if(o&1){let n=C();e(0,"tr")(1,"td"),a(2,"img",24),t(),e(3,"td"),i(4),t(),e(5,"td",25),i(6),t(),e(7,"td",26),i(8),t(),e(9,"td")(10,"span",27),i(11),t()(),e(12,"td"),i(13),T(14,"date"),t(),e(15,"td")(16,"button",28),l("click",function(){let s=u(n).$implicit,k=p(2);return g(k.editProduct(s))}),i(17,"Edit"),t(),e(18,"button",29),l("click",function(){let s=u(n).$implicit,k=p(2);return g(k.deleteProduct(s._id))}),i(19,"Delete"),t()()()}if(o&2){let n=r.$implicit;d(2),m("src",n.image||"https://via.placeholder.com/60",D),d(2),N(n.name),d(2),b("$",n.price),d(2),b(" ",n.description||"No description"," "),d(2),m("ngClass",n.isActive?"active":"inactive"),d(),b(" ",n.isActive?"Active":"Inactive"," "),d(2),b(" ",L(14,7,n.createdAt,"mediumDate")," ")}}function lt(o,r){if(o&1){let n=C();e(0,"div",19)(1,"h2",3),i(2,"\u{1F33E} Products Management"),t(),e(3,"button",20),l("click",function(){u(n);let s=p();return g(s.toggleTable(!1))}),i(4,"Add Products"),t(),e(5,"div",21)(6,"table",22)(7,"thead")(8,"tr")(9,"th"),i(10,"Image"),t(),e(11,"th"),i(12,"Name"),t(),e(13,"th"),i(14,"Price ($)"),t(),e(15,"th"),i(16,"Description"),t(),e(17,"th"),i(18,"Status"),t(),e(19,"th"),i(20,"Created"),t(),e(21,"th"),i(22,"Actions"),t()()(),e(23,"tbody"),A(24,st,20,10,"tr",23),t()()()()}if(o&2){let n=p();d(24),m("ngForOf",n.products)}}var y=class o{constructor(r,n){this.fb=r;this.productsService=n;this.productForm=this.fb.group({name:["",M.required],price:[0,[M.required,M.min(0)]],description:[""],image:[""],isActive:[!0]})}products=[];productForm;showTable=!0;isLoading=!1;editingProductId=null;ngOnInit(){this.loadProducts()}loadProducts(){this.isLoading=!0,this.productsService.getProducts().subscribe({next:r=>{this.products=r},error:r=>{console.error("Error loading products:",r)},complete:()=>{this.isLoading=!1}})}onSubmit(){if(this.productForm.invalid){this.productForm.markAllAsTouched();return}let r=this.productForm.value;this.editingProductId?this.productsService.updateProduct(this.editingProductId,r).subscribe({next:()=>{alert("Product Updated Successfully \u{1F33E}"),this.loadProducts(),this.productForm.reset(),this.showTable=!0},error:n=>console.error("Update failed:",n)}):this.productsService.createProduct(r).subscribe({next:()=>{alert("Product Saved Successfully \u{1F33E}"),this.loadProducts(),this.productForm.reset(),this.showTable=!0},error:n=>console.error("Create failed:",n)})}toggleTable(r){this.showTable=r}deleteProduct(r){confirm("Are you sure you want to delete this product?")&&this.productsService.deleteProduct(r).subscribe({next:()=>{this.loadProducts()},error:n=>console.error("Delete failed:",n)})}editProduct(r){this.editingProductId=r._id||null,this.productForm.patchValue({name:r.name,price:r.price,description:r.description,image:r.image,isActive:r.isActive}),this.showTable=!1}static \u0275fac=function(n){return new(n||o)(f(nt),f(S))};static \u0275cmp=x({type:o,selectors:[["app-products"]],standalone:!1,decls:2,vars:2,consts:[["id","addProducts",4,"ngIf"],["id","showProducts",4,"ngIf"],["id","addProducts"],[1,"page-title"],[1,"form-wrapper"],[3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-group"],["type","text","formControlName","name","placeholder","Enter product name"],["type","number","formControlName","price","placeholder","Enter price"],[1,"form-group","full-width"],["type","text","formControlName","image","placeholder","Paste image URL"],["formControlName","description","rows","3","placeholder","Enter product description"],[1,"form-group","toggle-group"],[1,"switch"],["type","checkbox","formControlName","isActive"],[1,"slider"],["type","submit",1,"save-btn"],[1,"save-btn",3,"click"],["id","showProducts"],[3,"click"],[1,"table-wrapper"],[1,"modern-table"],[4,"ngFor","ngForOf"],[1,"product-img",3,"src"],[1,"price"],[1,"desc"],[1,"status",3,"ngClass"],[1,"edit-btn",3,"click"],[1,"delete-btn",3,"click"]],template:function(n,c){n&1&&A(0,ct,32,1,"div",0)(1,lt,25,1,"div",1),n&2&&(m("ngIf",!c.showTable),d(),m("ngIf",c.showTable))},dependencies:[V,R,$,X,J,Z,Y,Q,W,tt,et,j],styles:['.table-wrapper[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:14px;box-shadow:0 8px 25px #00000014;overflow-x:auto}.modern-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:900px}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0f5132,#198754);color:#fff}.modern-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px;text-align:left;font-weight:600;font-size:14px}.modern-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px;border-bottom:1px solid #e9ecef;font-size:14px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f4fdf7;transition:.3s}.product-img[_ngcontent-%COMP%]{width:55px;height:55px;object-fit:cover;border-radius:8px}.price[_ngcontent-%COMP%]{font-weight:600;color:#198754}.desc[_ngcontent-%COMP%]{max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.status[_ngcontent-%COMP%]{padding:6px 10px;border-radius:20px;font-size:12px;font-weight:600}.status.active[_ngcontent-%COMP%]{background:#d1e7dd;color:#0f5132}.status.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#842029}.edit-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{border:none;padding:6px 10px;margin-right:5px;border-radius:6px;font-size:12px;cursor:pointer;transition:.3s}.edit-btn[_ngcontent-%COMP%]{background:#198754;color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{background:#157347}.delete-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.delete-btn[_ngcontent-%COMP%]:hover{background:#bb2d3b}@media (max-width: 768px){.modern-table[_ngcontent-%COMP%]{min-width:700px}}.page-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#198754}.form-wrapper[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:14px;box-shadow:0 8px 25px #00000014;margin-bottom:30px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.full-width[_ngcontent-%COMP%]{grid-column:span 2}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin-bottom:6px;color:#0f5132}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px 12px;border-radius:8px;border:1px solid #ced4da;transition:.3s;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#198754;outline:none;box-shadow:0 0 0 3px #19875433}.save-btn[_ngcontent-%COMP%]{margin-top:20px;padding:12px;border:none;border-radius:8px;background:linear-gradient(135deg,#0f5132,#198754);color:#fff;font-size:15px;font-weight:600;cursor:pointer;transition:.3s;width:100%}.save-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);opacity:.9}.toggle-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.switch[_ngcontent-%COMP%]{position:relative;width:50px;height:24px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;background-color:#ccc;border-radius:34px;inset:0;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:4px;bottom:3px;background-color:#fff;border-radius:50%;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#198754}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.full-width[_ngcontent-%COMP%]{grid-column:span 1}}']})};var pt=[{path:"",component:O,children:[{path:"dashboard",component:w},{path:"products",component:y},{path:"",redirectTo:"dashboard",pathMatch:"full"}]}],E=class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=v({type:o});static \u0275inj=_({imports:[h.forChild(pt),h]})};var at=class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=v({type:o});static \u0275inj=_({imports:[z,it,rt,h,E]})};export{at as AdminModule};
